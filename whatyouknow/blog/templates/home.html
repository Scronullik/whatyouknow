{% extends 'core/base.html' %}

{% block menu %}
    {% include 'includes/menu.html' %}
{% endblock %}

{% block content %}

    <div class="ui fitted horizontal basic segment container">
        <div class="ui primary secondary pointing menu">
            <a class="item">
                My choices
            </a>
            <a class="active item">
                All
            </a>

            {% for index, name in categories %}
                <a class="item">
                    {{ name }}
                </a>
            {% endfor %}
        </div>

        <div class="ui tiny pagination menu">
            <a class="item">
                Day
            </a>
            <a class="primary active item">
                Week
            </a>
            <a class="item">
                Month
            </a>
            <a class="item">
                Year
            </a>
        </div>

        <div class="ui right floated tiny pagination menu">
            <a class="primary active item">
                Any rating
            </a>
            <a class="item">
                <i class="grey greater than equal icon"></i>10
            </a>
            <a class="item">
                <i class="grey greater than equal icon"></i>25
            </a>
            <a class="item">
                <i class="grey greater than equal icon"></i>50
            </a>
            <a class="item">
                <i class="grey greater than equal icon"></i>75
            </a>
            <a class="item">
                <i class="grey greater than equal icon"></i>80
            </a>
            <a class="item">
                <i class="grey greater than equal icon"></i>90
            </a>
        </div>
    </div>

    <div class="ui vertical basic segment container">

        <div class="ui one basic cards">
            {% for post in posts %}

                <div class="ui card" >
                    <div class="content">
                        <div class="right floated meta">
                            <span class="date">{{ post.date|date:"F d, Y \a\t h:i A" }}</span>
                        </div>
                        <a class="ui basic image label">
                            <img src="{{ post.user.image.url }}">
                            {{ post.user.name }} (@{{ post.user.username }})
                        </a>
                        <a class="primary header" style="margin-top: 0.5em;">{{ post.title }}</a>
                        <div class="left floated meta" style="margin-top: 0.5em;">

                            {% regroup tags by post_id as post_tags_list %}

                            {% for post_id, post_tags in post_tags_list %}
                                {% if post_id == post.pk %}

                                    {% for tag in post_tags %}

                                        {% if forloop.last %}
                                            <a>{{ tag.name }}</a>
                                        {% else %}
                                            <a style="margin-right: 0;">{{ tag.name }}</a><span style="margin-right: 0;">,</span>
                                        {% endif %}

                                    {% endfor %}

                                {% endif %}
                            {% endfor %}

                        </div>
                    </div>
                    {% if post.feed_cover %}
                        <div class="image" style="margin-top: 0.5em;">
                            {% if post.feed_cover_caption %}
                                <figure class="">
                                    <img src="{{ post.feed_cover }}" class="ui centered massive image"/>
                                    <figcaption class=""><i class="ui centered text">{{ post.feed_cover_caption }}</i></figcaption>
                                </figure>
                            {% else %}
                                <img src="{{ post.feed_cover }}" class="ui centered massive image"/>
                            {% endif %}

                        </div>
                    {% endif %}
                    <div class="content" style="padding-top: 0.5em;">
                        <div class="description">
                            {{ post.feed_article_preview|safe }}
                        </div>
                    </div>
                    <div class="extra content">
                        <button class="ui primary left floated basic button">{{ post.feed_read_more_button_name }}</button>
                    </div>

                </div>
            {% endfor %}

        </div>
    </div>

    <div class="ui vertical basic segment container">
        <div class="ui left floated tiny pagination menu">
            <a class="item">
                <i class="angle double left icon"></i>
            </a>
            <a class="item">
                <i class="angle left icon"></i>
            </a>
            <a class="item">
                1
            </a>
            <a class="item">
                2
            </a>
            <a class="primary active item">
                3
            </a>
            <a class="item">
                4
            </a>
            <a class="item">
                5
            </a>
            <div class="disabled item">
                ...
            </div>
            <a class="item">
                78
            </a>
            <a class="item">
                <i class="angle right icon"></i>
            </a>
            <a class="item">
                <i class="angle double right icon"></i>
            </a>
        </div>
    </div>

{% endblock %}

{% block rail %}
 {% include 'includes/rail.html' %}
{% endblock %}